# Программа на базе FastAPI для управления заказами

# Функции:
- Добавление товара в заказ
- Увеличение количества, если товар уже есть
- Проверка наличия товара на складе
- Автоматическое обновление остатков
- Полная документация через Swagger UI

# Что используется:
- Python 3.10
- FastAPI
- PostgreSQL
- SQLAlchemy

# Структура:
- main.py — основной API
- database.py — подключение к БД
- schemas.py — модели данных
- init_db.py — создание таблиц в БД
- database.sql — сама БД (включает в том числе и данные)

-----------------------------------------------------------------------------------------------

# Как поставить?

## 1. Клонируй репозиторий:
```bash
git clone https://github.com/nijusann/shop-api.git
cd shop-api
```
## 2. Установи зависимости:
```bash
pip install -r requirements.txt
```
## 3. Запусти PostgreSQL:
```bash
sudo service postgresql start
```
или это можно сделать через DBeaver

## 4. Создай базу данных и таблицы:
```bash
psql -U postgres -c "CREATE DATABASE postgres;"
psql -U postgres -d shop_db -f init_db.sql
```
или же можно импортировать готовую базу данных с готовыми данными с файла database.sql

## 5. Запусти сервер:
```bash
uvicorn main:app --reload
```
## 6. Открой страницу: 
http://localhost:8000/docs

## 7. Можете работать!

Пример импользования:
```http
POST /orders/1/add-product
{
  "product_id": 1,
  "quantity": 2
}
```

Чтобы начать работать, в default нажимайте на кнопку "Try It Out", тогда вам будет доступно редактирование. В строке "order_id" вводим тот заказ, который мы хотим изменить, а в теле ниже выбираем что хотим добавить/изменить и сколько, затем нажимай кнопку "Executive" и затем проверяем, внизу логи есть :)

